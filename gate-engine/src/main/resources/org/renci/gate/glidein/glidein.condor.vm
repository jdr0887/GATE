# generated by the PortalGlideinFactory

universe              = grid

grid_resource         = ${gridType} ${gatekeeper}/jobmanager-${jobmanager}
globusrsl             = ${rsl}
x509userproxy         = ${x509userproxy}

executable            = glidein.sh
transfer_input_files  = condor_config,user-job-wrapper.sh

transfer_executable   = TRUE

stream_output         = False
stream_error          = False
WhenToTransferOutput  = ON_EXIT

output                = job.out
error                 = job.err
log                   = job.log

notification          = NEVER

periodic_hold         = ( (GlobusStatus==16) \
                          || ((JobStatus==1) && ((CurrentTime - EnteredCurrentStatus) > (${siteMaxQueueTimeMins}*60))) \
                        )

periodic_remove       = ( ((JobStatus==4) && ((CurrentTime - EnteredCurrentStatus) > (10*60))) \
                          || ((JobStatus==5) && ((CurrentTime - EnteredCurrentStatus) > (3*60*60))) \
                        )

on_exit_hold          = (ExitBySignal == True) || (ExitCode != 0)

# extra attributes for portal.renci.org glidein factory
+IsPilotGlideIn      = 1
+GLIDEIN_SITE_NAME   = "${siteName}"
+GLIDEIN_PARENT_ID   = "${glideinParentId}"
+PortalUser          = "${portalUser}"
+GLIDEIN_COUNT       = ${jobCount}

queue 1

